{% extends "base.html" %}
{% block content %}

<style>
  #loading-overlay {
    display: none;
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0, 0, 0, 0.85);
    color: white;
    z-index: 9999;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }
  .spinner {
    border: 5px solid rgba(255, 255, 255, 0.1);
    border-top: 5px solid #3498db;
    border-radius: 50%;
    width: 50px; height: 50px;
    animation: spin 1s linear infinite;
    margin-bottom: 20px;
  }
  @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
</style>

<div id="loading-overlay">
  <div class="spinner"></div>
  <h2>Building Lineups...</h2>
  <p>Solving constraints and checking team stacks.</p>
</div>

<div class="grid two">
  <div class="card">
    <div class="card-h">
      <h1>NFL Optimizer Settings</h1>
    </div>
    <div class="card-b">
      <form id="optimizer-form" method="POST" action="{{ url_for('nfl') }}">

        <div class="row2">
          <div>
            <label>Number of Lineups</label>
            <input name="num_lineups" type="number" value="20" min="1" max="150">
          </div>
          <div>
            <label>Min Salary</label>
            <input name="min_salary" type="number" value="46000" step="100">
          </div>
        </div>

        <div class="row2">
          <div>
            <label>Min Unique Players</label>
            <input name="min_unique" type="number" value="2" min="0" max="8">
          </div>
          <div>
            <label>Randomness</label>
            <input name="randomness" type="number" step="0.1" value="1.0">
          </div>
        </div>

        <button class="btn" type="submit" style="width:100%; margin-top:20px;">Generate NFL Lineups</button>
      </form>
    </div>
  </div>

  <div class="card">
    <div class="card-h"><h2>Strategy Rules</h2></div>
    <div class="card-b">
      <ul class="muted" style="font-size: 14px; line-height: 1.8;">
        <li><strong>Automatic Stacking:</strong> Uses 3-2, 2-2-2, and 3-3-2 templates.</li>
        <li><strong>QB/DST Rule:</strong> Prevents playing a Defense against your QB.</li>
        <li><strong>RB/DST Logic:</strong> Encourages positive correlation between RB and Defense.</li>
      </ul>
    </div>
  </div>
</div>

<script>
  // Show overlay on click
  document.getElementById('optimizer-form').addEventListener('submit', function() {
    document.getElementById('loading-overlay').style.display = 'flex';
  });
</script>

{% endblock %}